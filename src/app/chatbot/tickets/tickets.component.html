<div>
  <app-navbar></app-navbar>
  <div class="container" style="margin-top: 5rem">
    <h6 class="my-2">Ticket Filters</h6>
    <div class="row">
      <div class="col-12 col-md-3">
        <div class="form-floating mb-3">
          <select
            id="status"
            name="status"
            [(ngModel)]="status"
            class="form-select"
            placeholder="Select"
          >
            <option disabled>Select</option>
            <option value="pending">Pending</option>
            <option value="completed">Completed</option>
          </select>
          <label for="floatingSelectGrid">Status</label>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <div class="form-floating mb-3">
          <input
            type="date"
            class="form-control"
            id="date"
            name="date"
            [(ngModel)]="date"
          />
          <label for="floatingInput">Date</label>
        </div>
      </div>
      <div class="col-12 col-md-3">
        <button (click)="onSearch()" class="btn search py-3 mb-3">
          Search
        </button>
      </div>
      <div class="col-12 col-md-3">
        <button (click)="onClear()" class="btn btn-dark py-3 mb-3">
          Reset
        </button>
      </div>
    </div>
    <h6 class="mt-3 mb-2">Tickets</h6>
    <div class="text-center mt-5" *ngIf="loading">
      <span class="loader"></span>
    </div>
    <div class="text-center mt-5" *ngIf="!loading && tickets.length == 0">
      <h5>No Tickets Found</h5>
    </div>
    <div class="row">
      <div class="col-12 col-md-6 col-lg-3 my-2" *ngFor="let ticket of tickets">
        <div
          class="card"
          [ngClass]="
            ticket['Status'].toLowerCase() === 'pending'
              ? 'pendingCard'
              : 'completedCard'
          "
        >
          <div class="card-body">
            <h5 class="card-title d-flex justify-content-between">
              {{ ticket["Type of Issue"] }}
              <div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  fill="currentColor"
                  class="bi bi-tools"
                  [ngClass]="
                    ticket['Status'].toLowerCase() === 'pending'
                      ? 'pending'
                      : 'completed'
                  "
                  viewBox="0 0 16 16"
                  *ngIf="
                    ticket['Type of Issue']
                      .toLowerCase()
                      .includes('hardware issue')
                  "
                >
                  <path
                    d="M1 0 0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.27 3.27a.997.997 0 0 0 1.414 0l1.586-1.586a.997.997 0 0 0 0-1.414l-3.27-3.27a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0Zm9.646 10.646a.5.5 0 0 1 .708 0l2.914 2.915a.5.5 0 0 1-.707.707l-2.915-2.914a.5.5 0 0 1 0-.708ZM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11Z"
                  />
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  fill="currentColor"
                  class="bi bi-cash-coin"
                  [ngClass]="
                    ticket['Status'].toLowerCase() === 'pending'
                      ? 'pending'
                      : 'completed'
                  "
                  viewBox="0 0 16 16"
                  *ngIf="
                    ticket['Type of Issue']
                      .toLowerCase()
                      .includes('reimbursement issue')
                  "
                >
                  <path
                    fill-rule="evenodd"
                    d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"
                  />
                  <path
                    d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"
                  />
                  <path
                    d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"
                  />
                  <path
                    d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"
                  />
                </svg>
              </div>
            </h5>
            <h6 class="card-subtitle mb-2 text-muted">
              {{ ticket["Device"] }}
            </h6>
            <div class="card-text">
              <p class="font-weight-bold captialize">
                {{ ticket["Issue"] }}
              </p>
              <br />
              <p class="font-weight-bold text-sm text-muted">
                {{ ticket["Date"] | date: "MM/dd/yyyy" }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
